<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Portal | Product Edition</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Bai+Jamjuree:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <style>
        /*
         * CUSTOM STYLES FOR NEON/GAMING THEME
         */
        :root {
            --neon-blue: #00f7ff; /* Primary/Accent - Light Cyan */
            --neon-pink: #ff00e4; /* Secondary/Highlight - Magenta */
            --dark-bg: #030308;
            --dark-header: #111827; /* Darker shade for contrast */
            --green-accent: #059669; /* New color from your image */
        }

        body {
            font-family: 'Bai Jamjuree', sans-serif;
            background-color: var(--dark-bg);
            color: #e2e8f0;
            overflow-x: hidden;
        }

        /* üåü PARTICLES.JS (Mandatory Blue Particles Moving) */
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Ensures it is always the background, even for the modal */
            background-color: var(--dark-bg);
        }
        
        /* HEADING STYLES */
        .headingdiv {
            font-size: 2.5rem;
            text-align: center;
            padding: 20px;
            font-weight: 700;
            margin-bottom: 2rem;
            color: var(--neon-blue); 
            text-shadow: 0 0 10px var(--neon-blue), 0 0 20px rgba(0, 247, 255, 0.6), 0 0 30px rgba(0, 247, 255, 0.2);
            animation: neon-flicker 1.5s infinite alternate;
            font-family: 'Orbitron', sans-serif;
        }

        @keyframes neon-flicker {
            from {
                text-shadow: 0 0 8px var(--neon-blue), 0 0 15px var(--neon-blue), 0 0 20px rgba(0, 247, 255, 0.2);
                opacity: 0.98;
            }
            to {
                text-shadow: 0 0 4px var(--neon-blue), 0 0 10px var(--neon-blue), 0 0 15px rgba(0, 247, 255, 0.1);
                opacity: 1;
            }
        }

        #typed_headings {
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink), 0 0 20px rgba(255, 0, 228, 0.6);
        }

        /* RESTORED: AUTH MODAL STYLES (Your Original Design) */
        #auth-section {
            z-index: 100;
        }
        /* MODIFIED: Ensure modal background is visible, but particles are behind it */
        #auth-section {
            background: rgba(0, 0, 0, 0.8); 
            backdrop-filter: blur(10px);
        }
        .auth-container {
            background: rgba(10, 10, 20, 0.95);
        }
        
        /* Form Display Logic */
        .form-container {
            display: none;
        }
        .form-container.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Your Custom Font and Neon Aesthetics */
        .form-title {
            font-family: 'Orbitron', sans-serif; 
            font-size: 1.8rem;
            color: var(--neon-pink);
            text-align: center;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 10px rgba(255, 0, 228, 0.5), 0 0 20px rgba(255, 0, 228, 0.2);
        }
        .input-group {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            border: 1px solid var(--neon-blue);
            border-radius: 6px;
            padding: 8px 12px;
            background-color: rgba(255, 255, 255, 0.05);
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .input-group:focus-within {
            border-color: var(--neon-pink);
            box-shadow: 0 0 8px rgba(255, 0, 228, 0.5);
        }
        .input-group i {
            color: var(--neon-blue);
            margin-right: 10px;
            min-width: 20px;
        }
        .input-group input {
            background: transparent;
            border: none;
            outline: none;
            color: white;
            padding: 4px 0;
            width: 100%;
            font-size: 1rem;
        }
        .submit-btn {
            width: 100%;
            background-color: var(--neon-blue);
            color: var(--dark-bg);
            padding: 12px;
            font-weight: bold;
            border-radius: 8px;
            margin-top: 1.5rem;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0, 247, 255, 0.4);
            font-family: 'Orbitron', sans-serif;
        }
        .submit-btn:hover {
            background-color: var(--neon-pink);
            color: white;
            box-shadow: 0 0 20px rgba(255, 0, 228, 0.6);
        }
        .form-footer {
            margin-top: 1rem;
            text-align: center;
            color: #ccc;
            font-size: 0.9rem;
        }
        .form-footer a {
            color: var(--neon-pink);
            font-weight: bold;
            text-decoration: none;
            transition: color 0.3s;
        }
        .form-footer a:hover {
            color: var(--neon-blue);
        }

        /* --- NEW/MODIFIED STYLES --- */
        /* Secondary Nav Item Hover Fix */
        .secondary-nav-item {
            color: #ccc; /* Default text color */
            transition: color 0.2s, text-shadow 0.2s;
            position: relative;
        }
        .secondary-nav-item:hover {
            color: var(--neon-blue);
            text-shadow: 0 0 5px var(--neon-blue), 0 0 10px rgba(0, 247, 255, 0.5);
        }
        .secondary-nav-item.highlighted {
            color: var(--neon-pink); /* Highlighted items stand out */
        }
        .secondary-nav-item.highlighted:hover {
            color: var(--neon-blue); /* They also turn blue on hover */
            text-shadow: 0 0 5px var(--neon-blue), 0 0 10px rgba(0, 247, 255, 0.5);
        }
        /* END NEW/MODIFIED STYLES */
    </style>
</head>

<body>
    <div id="particles-js"></div>

    <button id="backToHomeBtn" onclick="toggleAuth(false)" 
        class="fixed top-5 left-5 bg-white/10 hover:bg-white/20 text-[var(--neon-blue)] w-10 h-10 rounded-full text-xl cursor-pointer z-[101] flex items-center justify-center"
        style="display: none;">
        <i class="fas fa-arrow-left"></i>
    </button>

    <section id="auth-section" class="fixed top-0 left-0 w-full h-screen hidden justify-center items-center overflow-y-auto p-5" 
        style="background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px);">
        <div class="auth-container relative w-[450px] max-w-[90%] min-h-[400px] border-2 border-[var(--neon-blue)]/30 rounded-2xl shadow-[0_0_50px_rgba(0,247,255,0.2),0_0_50px_rgba(255,0,228,0.2)] bg-opacity-95 p-10 backdrop-blur-sm">
            
            <div class="form-side w-full relative min-h-[350px]"> 

                <div class="form-container login-form active" id="loginFormContainer">
                    <h2 class="form-title">Welcome Back</h2>
                    <form id="loginForm" onsubmit="event.preventDefault(); finddata();">
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="signinemail" placeholder="Email" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="signinpwd" placeholder="Password" required>
                        </div>
                        <button type="submit" class="submit-btn">SIGN IN</button>
                        <div class="form-footer">
                            Don't have an account? <a href="#registerForm" id="showRegister">Create account</a>
                        </div>
                    </form>
                </div>

                <div class="form-container register-form" id="registerFormContainer">
                    <h2 class="form-title">New Account</h2>
                    <form id="registerForm" onsubmit="event.preventDefault(); adddatas();">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="username" placeholder="Username" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="email" placeholder="Email" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="password" placeholder="Password" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
                        </div>
                        <button type="submit" class="submit-btn">SIGN UP</button>
                        <div class="form-footer">
                            Already have an account? <a href="#loginForm" class="switch-to-login">Sign in</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <div id="main-portal-content" class="content min-h-screen relative z-10">

        <header class="sticky top-0 w-full bg-[var(--dark-header)] border-b border-gray-700/50 z-40 shadow-xl">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
                <div class="flex justify-between items-center h-16">
                    
                    <div class="text-3xl font-extrabold text-[var(--neon-pink)] font-orbitron mr-6">
                        <span class="text-[var(--neon-blue)]">G</span>AMES
                    </div>

                    <div class="flex-1 max-w-2xl flex items-center rounded-lg overflow-hidden border border-gray-700/50 shadow-inner">
                        <button id="search-button-header" class="bg-[var(--green-accent)] hover:bg-emerald-700 h-12 w-12 text-white text-xl transition">
                            <i class="fas fa-search"></i>
                        </button>
                        <input id="search-input-header" type="text" placeholder="Search games and products here..." 
                            class="bg-gray-800 text-white p-2 h-12 w-full outline-none border-0 focus:ring-0">
                    </div>
                    
                    <div class="flex items-center space-x-4 ml-6">
                        
                        <div class="relative">
                            <button id="categories-btn" onclick="toggleCategoriesMenu()" class="flex items-center justify-center space-x-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition font-semibold">
                                <i class="fas fa-th-large text-lg text-gray-400"></i>
                                <span>Categories</span>
                            </button>
                            <div id="categories-dropdown" class="absolute right-0 mt-3 w-48 bg-gray-900 border border-[var(--neon-blue)] rounded-md shadow-2xl py-2 hidden z-50 animate-in fade-in slide-in-from-top-1">
                                <a href="#" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="alert('Trending Selected!'); return false;"><i class="fas fa-fire mr-2"></i> Trending</a>
                                <a href="#" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="alert('Action Selected!'); return false;"><i class="fas fa-fist-raised mr-2"></i> Action</a>
                                <a href="#" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="alert('Adventure Selected!'); return false;"><i class="fas fa-compass mr-2"></i> Adventure</a>
                                <a href="#" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="alert('Puzzle Selected!'); return false;"><i class="fas fa-puzzle-piece mr-2"></i> Puzzle</a>
                                <a href="#" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="alert('Sports Selected!'); return false;"><i class="fas fa-baseball-ball mr-2"></i> Sports</a>
                                <div class="h-px bg-gray-700 my-1"></div>
                                <a href="#" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="alert('View All Categories!'); return false;"><i class="fas fa-ellipsis-h mr-2"></i> View All...</a>
                            </div>
                        </div>

                        <button id="premium-btn" class="flex items-center justify-center space-x-2 px-4 py-2 text-white rounded-lg transition font-semibold"
                            style="background-color: #2F393C; color: white; hover:background-color: #3F494C;">
                            <i class="fas fa-crown text-yellow-500"></i>
                            <span>Premium</span>
                        </button>

                        <div id="user-profile-icon" class="relative">
                            <div id="profile-icon-wrapper" class="w-10 h-10 rounded-full cursor-pointer border-2 border-[var(--neon-blue)] hover:border-[var(--neon-pink)] transition bg-gray-700 flex items-center justify-center shadow-lg" 
                                    onclick="handleProfileClick()">
                                <i id="empty-icon" class="fas fa-user text-xl text-[var(--neon-blue)]" style="display: block;"></i>
                                <img id="profile-avatar" src="" alt="User Avatar" class="w-full h-full rounded-full object-cover hidden">
                            </div>
                            
                            <div id="logout-dropdown" class="absolute right-0 mt-3 w-48 bg-gray-900 border border-[var(--neon-blue)] rounded-md shadow-2xl py-2 hidden z-50 animate-in fade-in slide-in-from-top-1">
                                <div class="px-4 py-2 text-xs font-bold text-[var(--neon-pink)] border-b border-gray-800 truncate">
                                    <i class="fas fa-user-circle mr-2"></i> <span id="dropdown-username">Guest</span>
                                </div>
                                
                                <a href="#loginForm" id="nav-login-link" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="toggleAuth(true, 'login'); document.getElementById('logout-dropdown').classList.add('hidden'); return false;">
                                    <i class="fas fa-sign-in-alt mr-2 text-[var(--neon-blue)]"></i> Login
                                </a>
                                <a href="#registerForm" id="nav-signup-link" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition" onclick="toggleAuth(true, 'register'); document.getElementById('logout-dropdown').classList.add('hidden'); return false;">
                                    <i class="fas fa-user-plus mr-2 text-[var(--neon-pink)]"></i> Sign up
                                </a>

                                <button onclick="handleLogout()" class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-800/80 transition">
                                    <i class="fas fa-sign-out-alt mr-2 text-red-500"></i> Logout
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="w-full bg-gray-800 border-t border-b border-gray-700/50 shadow-inner">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-12 flex space-x-8 overflow-x-auto justify-center">
                    <a href="#" class="secondary-nav-item flex items-center space-x-2 text-sm font-medium whitespace-nowrap">
                        <i class="fab fa-windows"></i>
                        <span>Windows</span>
                    </a>
                    <a href="#" class="secondary-nav-item flex items-center space-x-2 text-sm font-medium whitespace-nowrap">
                        <i class="fab fa-apple"></i>
                        <span>Mac</span>
                    </a>
                    <a href="#" class="secondary-nav-item flex items-center space-x-2 text-sm font-medium whitespace-nowrap">
                        <i class="fab fa-android"></i>
                        <span>Android Apps</span>
                    </a>
                    <a href="#" class="secondary-nav-item flex items-center space-x-2 text-sm font-medium whitespace-nowrap">
                        <i class="fas fa-mobile-alt"></i>
                        <span>Android Games</span>
                    </a>
                    <a href="#" class="secondary-nav-item flex items-center space-x-2 text-sm font-medium whitespace-nowrap">
                        <i class="fas fa-gamepad"></i>
                        <span>PC Games</span>
                    </a>
                    <a href="#" class="secondary-nav-item highlighted flex items-center space-x-2 text-sm font-medium whitespace-nowrap">
                        <i class="fas fa-rocket"></i>
                        <span>DLC & Mods</span>
                    </a>
                    <a href="#" class="secondary-nav-item highlighted flex items-center space-x-2 text-sm font-medium whitespace-nowrap">
                        <i class="fas fa-desktop"></i>
                        <span>Software</span>
                    </a>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-10 pb-10">
            <div class="headingdiv">
                <span id="welcome-text">WELCOME TO THE </span><span id="typed_headings"></span>
            </div>
            <p class="text-xl text-center mb-12 text-gray-300 max-w-4xl mx-auto font-light leading-relaxed">
                Discover the latest digital products and games across all platforms. Sign in with your profile icon to start your journey!
            </p>

            <div id="filter-bar" class="flex justify-center flex-wrap gap-3 mb-12" style="display: none;">
                <button class="category-btn active rounded-full text-sm py-2 px-5 font-semibold shadow-md">Trending üî•</button>
                <button class="category-btn rounded-full text-sm py-2 px-5 font-semibold shadow-md">Action üí•</button>
                <button class="category-btn rounded-full text-sm py-2 px-5 font-semibold shadow-md">Adventure üó∫Ô∏è</button>
                <button class="category-btn rounded-full text-sm py-2 px-5 font-semibold shadow-md">Puzzle üß©</button>
                <button class="category-btn rounded-full text-sm py-2 px-5 font-semibold shadow-md">Sports ‚öΩ</button>
                <button class="category-btn rounded-full text-sm py-2 px-5 font-semibold shadow-md">Strategy üß†</button>
            </div>

            <section class="mt-12">
                <h2 id="games-section-title" class="text-3xl font-bold mb-6 text-gray-100 border-l-4 border-[var(--neon-pink)] pl-4">All Games</h2>
                <div id="game-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6">
                    <p id="loading-message" class="text-center text-xl text-gray-400 col-span-full py-10">
                        <i class="fas fa-spinner fa-spin mr-2 text-[var(--neon-blue)]"></i> Initializing Game Grid...
                        <br><span class="text-sm text-gray-500 mt-2 block">Awaiting API connection to load games.</span>
                    </p>
                </div>
                <div class="text-center mt-12">
                    <button id="show-more-btn" class="bg-transparent text-[var(--neon-blue)] font-bold py-3 px-8 rounded-full hover:bg-[var(--neon-blue)]/10 border-2 border-[var(--neon-blue)] transition shadow-lg" style="display: none;" onclick="toggleGameLimit()">Show More Games</button>
                </div>
            </section>

            <section id="license-information" class="pt-24 mt-12 py-10 border-t-2 border-[var(--neon-pink)]/30">
                <h2 class="text-4xl font-extrabold mb-10 text-[var(--neon-blue)] text-center uppercase tracking-wider font-orbitron">
                    <span class="pb-1">OUR MISSION</span>
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                    <div class="text-center p-8 bg-gray-900 rounded-xl shadow-[0_0_25px_rgba(255,0,228,0.1)] border border-[var(--neon-pink)]/20 transition hover:bg-gray-800/80 hover:scale-[1.02] cursor-pointer">
                        <span class="text-6xl mb-4 block text-[var(--neon-blue)]">üéÆ</span>
                        <h3 class="text-xl font-bold mb-3 text-white font-orbitron">Product Focus</h3>
                        <p class="text-gray-400 text-sm">We provide a streamlined marketplace for digital products, focusing on games, apps, and software across all major operating systems.</p>
                    </div>
                    <div class="text-center p-8 bg-gray-900 rounded-xl shadow-[0_0_25px_rgba(0,247,255,0.1)] border border-[var(--neon-blue)]/20 transition hover:bg-gray-800/80 hover:scale-[1.02] cursor-pointer">
                        <span class="text-6xl mb-4 block text-[var(--neon-pink)]">‚ú®</span>
                        <h3 class="text-xl font-bold mb-3 text-white font-orbitron">Premium Content</h3>
                        <p class="text-gray-400 text-sm">Access exclusive premium content, DLC, and early access titles with a single subscription, highlighted by our special branding.</p>
                    </div>
                    <div class="text-center p-8 bg-gray-900 rounded-xl shadow-[0_0_25px_rgba(0,247,255,0.1)] border border-[var(--neon-blue)]/20 transition hover:bg-gray-800/80 hover:scale-[1.02] cursor-pointer">
                        <span class="text-6xl mb-4 block text-[var(--neon-blue)]">üåê</span>
                        <h3 class="text-xl font-bold mb-3 text-white font-orbitron">Platform Diversity</h3>
                        <p class="text-gray-400 text-sm">From PC games to mobile apps, our platform ensures you find what you need regardless of your preferred device.</p>
                    </div>
                </div>

                <hr class="border-[var(--neon-pink)]/20 my-10">

                <h3 class="text-2xl font-bold mb-5 text-[var(--neon-blue)] border-l-4 border-[var(--neon-blue)] pl-4">Technical Information & License Compliance</h3>
                <p class="text-gray-400 mb-6 text-sm">
                    We appreciate the work of the global open-source community that powers many of our technical features, including Tailwind CSS, Typed.js, and Particles.js.
                </p>

                <div class="bg-gray-900/70 p-6 rounded-lg shadow-inner border border-gray-700 overflow-x-auto text-sm text-gray-300">
                    <h4 class="text-lg font-semibold mb-3 text-[var(--neon-pink)]">The MIT License (Particles.js)</h4>
                    <pre class="whitespace-pre-wrap font-mono text-xs">
The MIT License (MIT)

Copyright (c) 2015, Vincent Garreau

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
                    </pre>
                </div>
            </section>
        </main>

        <footer class="mt-20 border-t-2 border-[var(--neon-blue)]/20 bg-gray-950 py-8 text-center text-gray-500">
            <div class="flex justify-center space-x-6 mb-4 text-xl">
                <a href="#" class="hover:text-[var(--neon-blue)] transition"><i class="fab fa-twitter"></i></a>
                <a href="#" class="hover:text-[var(--neon-blue)] transition"><i class="fab fa-discord"></i></a>
                <a href="#" class="hover:text-[var(--neon-blue)] transition"><i class="fab fa-github"></i></a>
            </div>
            <p class="mb-2 text-sm">&copy; 2024 Simplified Game Portal - Product Edition. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // --- GLOBAL STATE ---
        const INITIAL_GAME_LIMIT = 12;
        let currentGameLimit = INITIAL_GAME_LIMIT;
        let allGames = []; 
        let isAuthActive = false;
        let isUserLoggedIn = false;
        let currentUserName = null;
        let currentUserEmail = null;

        // --- AUTH DUMMY FUNCTIONS (UNCHANGED) ---

        async function adddatas() {
            const email = document.getElementById("email").value.trim();
            const username = document.getElementById("username").value.trim();
            const password = document.getElementById("password").value.trim();
            const confirmPassword = document.getElementById("confirmPassword").value.trim();

            if (password !== confirmPassword) {
                alert("Passwords do not match!");
                return;
            }
            if (!email || !username || !password) {
                alert("Please fill all fields.");
                return;
            }

            console.log("Simulating registration for:", username);
            alert("‚úÖ Registration successful! You can now log in.");

            document.getElementById("registerForm").reset();
            showLoginForm();
        }

        async function finddata() {
            const email = document.getElementById("signinemail").value.trim();
            const password = document.getElementById("signinpwd").value.trim();

            if (!email || !password) {
                alert("Please fill all the fields");
                return;
            }

            currentUserName = email.split('@')[0];

            console.log("Simulating login for:", email);
            currentUserEmail = email;
            isUserLoggedIn = true;
            toggleAuth(false);
            updateProfileIcon();
            alert(`‚úÖ Login successful! Welcome back, ${currentUserName}.`);

            document.getElementById("loginForm").reset();
        }


        // --- PROFILE ICON / AUTH LOGIC (UNCHANGED) ---
        function handleLogout() {
            currentUserName = null;
            currentUserEmail = null;
            isUserLoggedIn = false;
            updateProfileIcon();
            document.getElementById('logout-dropdown').classList.add('hidden');
            alert("You have been successfully logged out.");
        }

        function handleProfileClick() {
            const dropdown = document.getElementById('logout-dropdown');
            document.getElementById('categories-dropdown').classList.add('hidden'); 
            
            dropdown.classList.toggle('hidden');
            document.getElementById('dropdown-username').textContent = currentUserName || 'Guest';

            const navLogin = document.getElementById('nav-login-link');
            const navSignup = document.getElementById('nav-signup-link');
            const logoutBtn = dropdown.querySelector('button[onclick="handleLogout()"]');

            if (isUserLoggedIn) {
                navLogin.style.display = 'none';
                navSignup.style.display = 'none';
                logoutBtn.style.display = 'block';
            } else {
                navLogin.style.display = 'block';
                navSignup.style.display = 'block';
                logoutBtn.style.display = 'none';
            }
        }

        function updateProfileIcon() {
            const profileIconWrapper = document.getElementById('profile-icon-wrapper');
            const profileAvatar = document.getElementById('profile-avatar');
            const emptyIcon = document.getElementById('empty-icon');
            const logoutDropdown = document.getElementById('logout-dropdown');

            if (isUserLoggedIn) {
                const seed = currentUserName || currentUserEmail;
                profileAvatar.src = `https://api.dicebear.com/8.x/initials/svg?seed=${encodeURIComponent(seed)}&backgroundColor=00f7ff,ff00e4&radius=50`;
                profileAvatar.classList.remove('hidden');
                emptyIcon.style.display = 'none';
                profileIconWrapper.classList.add('hover:ring-2', 'ring-[var(--neon-pink)]');
                
            } else {
                profileAvatar.classList.add('hidden');
                profileAvatar.src = '';
                emptyIcon.style.display = 'block';
                logoutDropdown.classList.add('hidden');
                profileIconWrapper.classList.remove('hover:ring-2', 'ring-[var(--neon-pink)]');
            }
        }

        // CATEGORIES BUTTON FUNCTIONALITY (UNCHANGED)
        function toggleCategoriesMenu() {
            const dropdown = document.getElementById('categories-dropdown');
            document.getElementById('logout-dropdown').classList.add('hidden');
            dropdown.classList.toggle('hidden');
        }
        window.toggleCategoriesMenu = toggleCategoriesMenu;


        // --- TYPED.JS FUNCTION (UNCHANGED) ---
        function initializeAnimatedHeader() {
            const typedOptions = {
                strings: ["GAMING WORLD", "THE HUB", "THE GAMING PORTAL"],
                typeSpeed: 50,
                backSpeed: 25,
                backDelay: 1500,
                loop: true
            };
            new Typed('#typed_headings', typedOptions);
        }

        // --- AUTHENTICATION MODAL LOGIC (UNCHANGED) ---
        const authSection = document.getElementById('auth-section');
        const mainContent = document.getElementById('main-portal-content');
        const loginFormContainer = document.getElementById('loginFormContainer');
        const registerFormContainer = document.getElementById('registerFormContainer');
        const backToHomeBtn = document.getElementById('backToHomeBtn');

        window.toggleAuth = function(show = true, initialForm = 'login') {
            if (isUserLoggedIn && show) return; 

            if (show) {
                authSection.style.display = 'flex';
                mainContent.style.display = 'none';
                document.body.style.overflow = 'hidden';
                isAuthActive = true;
                backToHomeBtn.style.display = 'flex';
                if (initialForm === 'register') showRegisterForm();
                else showLoginForm();
            } else {
                authSection.style.display = 'none';
                mainContent.style.display = 'block';
                document.body.style.overflow = 'auto';
                isAuthActive = false;
                backToHomeBtn.style.display = 'none';
            }
        }

        function showRegisterForm() {
            loginFormContainer.classList.remove('active');
            registerFormContainer.classList.add('active');
        }

        function showLoginForm() {
            registerFormContainer.classList.remove('active');
            loginFormContainer.classList.add('active');
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('showRegister')?.addEventListener('click', (e) => {
                e.preventDefault();
                showRegisterForm();
            });
            document.querySelector('.switch-to-login')?.addEventListener('click', (e) => {
                e.preventDefault();
                showLoginForm();
            });

            window.addEventListener('click', (e) => {
                const profileIconWrapper = document.getElementById('profile-icon-wrapper');
                const logoutDropdown = document.getElementById('logout-dropdown');
                const categoriesBtn = document.getElementById('categories-btn');
                const categoriesDropdown = document.getElementById('categories-dropdown');

                if (logoutDropdown && profileIconWrapper && !profileIconWrapper.contains(e.target) && !logoutDropdown.contains(e.target)) {
                    logoutDropdown.classList.add('hidden');
                }
                
                if (categoriesDropdown && categoriesBtn && !categoriesBtn.contains(e.target) && !categoriesDropdown.contains(e.target)) {
                    categoriesDropdown.classList.add('hidden');
                }
            });
            
            updateProfileIcon();
            showLoginForm();
        });


        // --- MAIN BACKEND FETCH (Awaiting API connection) (UNCHANGED) ---
        async function fetchGamesFromBackend() {
            const gameGrid = document.getElementById('game-grid');
            const loadingMessage = document.getElementById('loading-message');
            const filterBar = document.getElementById('filter-bar');
            
            // Simulating API call delay for demonstration
            await new Promise(resolve => setTimeout(resolve, 500)); 

            if (allGames.length > 0) {
                loadingMessage.style.display = 'none';
                filterBar.style.display = 'flex';
                loadGameGrid(allGames);
            } else {
                gameGrid.innerHTML = `
                    <p id="loading-message" class="text-center text-xl text-gray-400 col-span-full py-10">
                        <i class="fas fa-spinner fa-spin mr-2 text-[var(--neon-blue)]"></i> Initializing Game Grid...
                        <br><span class="text-sm text-gray-500 mt-2 block">Awaiting API connection to load games.</span>
                    </p>`;
                filterBar.style.display = 'none';
            }
        }


        // --- UTILITIES (UNCHANGED) ---
        function loadGameGrid(gamesToShow = allGames, searchQuery = '') {
            const gameGrid = document.getElementById('game-grid');
            const showMoreBtn = document.getElementById('show-more-btn');
            gameGrid.innerHTML = ''; 

            if (gamesToShow.length === 0 && !searchQuery) {
                 gameGrid.innerHTML = `
                    <p id="loading-message" class="text-center text-xl text-gray-400 col-span-full py-10">
                        <i class="fas fa-spinner fa-spin mr-2 text-[var(--neon-blue)]"></i> Initializing Game Grid...
                        <br><span class="text-sm text-gray-500 mt-2 block">Awaiting API connection to load games.</span>
                    </p>`;
                showMoreBtn.style.display = 'none';
                return; 
            }
            // Add game rendering logic here when you connect your API
        }

        function initializeCategoryFiltering() {
            const categoryButtons = document.querySelectorAll('.category-btn');
            categoryButtons.forEach(button => {
                button.addEventListener('click', () => { /* Filtering logic */ });
            });
        }

        function initializeSearch() {
            const searchInput = document.getElementById('search-input-header');
            const searchButton = document.getElementById('search-button-header');
            const performSearch = () => { /* Search logic */ };
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
        }

        function toggleGameLimit() { /* Game limit logic */ }

        function handlePlayNow(title) {
            if (!isUserLoggedIn) {
                alert(`Please SIGN IN or SIGN UP to play ${title}.`);
                toggleAuth(true, 'login');
                return;
            }
            console.log("Starting game:", title);
            alert(`Launching ${title}...`);
        }

        window.handlePlayNow = handlePlayNow;
        window.toggleGameLimit = toggleGameLimit;
        window.adddatas = adddatas;
        window.finddata = finddata;
        window.handleLogout = handleLogout;
        window.handleProfileClick = handleProfileClick;


        // üåü PARTICLES.JS INITIALIZATION (FINAL FIX FOR MOVEMENT)
        function initializeParticles() {
            particlesJS("particles-js", {
                particles: {
                    number: { value: 80, density: { enable: true, value_area: 800 } },
                    color: { value: "var(--neon-blue)" }, 
                    shape: { type: "circle" },
                    opacity: { value: 0.6, random: true },
                    size: { value: 3, random: true, anim: { enable: true, speed: 1, size_min: 0.3 } },
                    line_linked: { enable: true, distance: 100, color: "var(--neon-blue)", opacity: 0.3, width: 1 },
                    move: { 
                        enable: true, 
                        speed: 1.5, 
                        direction: "none", 
                        random: false, 
                        straight: false, 
                        out_mode: "out", 
                        bounce: false 
                    }
                },
                interactivity: {
                    detect_on: 'canvas',
                    events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
                    modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
                },
                retina_detect: true
            });
        }

        // --- INIT ---
        window.onload = function() {
            console.log("Starting Game Portal Initialization...");
            initializeAnimatedHeader();
            fetchGamesFromBackend();
            initializeCategoryFiltering();
            initializeSearch();
            // üåü ENSURE PARTICLES INITIALIZE AFTER THE DOM IS READY
            initializeParticles(); 
            console.log("Initialization Complete. Particles are active and moving. Auth design is restored.");
        };
    </script>
</body>
</html>